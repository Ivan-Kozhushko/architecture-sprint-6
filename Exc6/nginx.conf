http {
   # Настройка upstream для балансировки нагрузки
   upstream backend_servers {
       server backend1.example.com;
       server backend2.example.com;
       server backend3.example.com;
   }
   # не больше 10 запросо в минуту
   # если превышение возвращаем 429 ошибку
   limit_req_zone $binary_remote_addr zone=rate_limit_10rm:10m rate=10r/m;

   server {
       listen 80;

       location / {
           proxy_pass http://backend_servers;
           # включаем ограничение  запросов
           limit_req zone=rate_limit_10rm;
           # при превышения лимита запросов отдаем 429 ошибку
           limit_req_status 429
       }

   }
}